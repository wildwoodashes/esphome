# This is the configuration file for the espSimplisafeAlarm external component.
# It defines the YAML structure and how it maps to the C++ code.

esp_simplisafe_alarm: # This is the top-level key users will use in their device config
  # Define the type and class of the C++ component
  COMPONENT_TYPE: polling_component # Because it inherits from PollingComponent
  class: esp_simplisafe_alarm       # Matches the C++ class name
  cpp_namespace: espSimplisafeAlarm # Matches the C++ namespace
  uses_platformio: yes              # Indicates this component requires PlatformIO build steps

  # Define dependencies on other ESPhome components (like binary_sensor)
  DEPENDENCIES:
    - binary_sensor

  # Define the schema for the configuration options of this component.
  # We are defining nested binary sensors.
  config_schema:
    # The 'update_interval' is automatically handled by PollingComponent,
    # so we don't need to define it explicitly here, but it will be available
    # for users to configure.

    # Define the 'armed_home' binary sensor configuration
    armed:
      # Use cv.Optional because the user doesn't *have* to configure this sensor
      # if they don't want it. Use cv.Required if it must be configured.
      # Use binary_sensor.binary_sensor_schema to include standard binary sensor options (name, icon, etc.)
      # Add the __call__ macro to link this YAML key to the C++ setter method.
      # The argument is the name of the setter method in your C++ class, without the namespace.
      # It expects a binary_sensor::BinarySensor* argument.
      # This maps: config -> esp_simplisafe_alarm -> armed_home -> C++ code
      # In C++, ESPhome will call this_component->set_armed_home_sensor(new BinarySensor(...));
      # when it parses the user's config.
      <<: !include ../binary_sensor/binary_sensor.yaml # Include standard binary sensor schema
      __call__: set_armed_home_sensor # Call this C++ method with the sensor instance

    # Define the 'armed_away' binary sensor configuration, similar to armed_home
    warning:
      <<: !include ../binary_sensor/binary_sensor.yaml
      __call__: set_armed_away_sensor